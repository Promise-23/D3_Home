<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>广西-停复电</title>
    <style>
    #test {
        width: 80%;
        height: 400px;
        margin: 0 auto;
        /* background-color:black; */
    }

     .cls-1 {
        fill: #fff;
        opacity: 0.15;
      }

      .cls-1, .cls-2, .cls-3 {
        fill-rule: evenodd;
      }

      .cls-2 {
        fill: #6ff;
        filter: url(#filter);
      }

      .cls-3 {
        fill: #ffcf6e;
        filter: url(#filter-2);
      }
    </style>
</head>
<body>
<div id="test">
<svg id="组_792" data-name="组 792" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="265" height="55" viewBox="0 0 265 55">
<defs>
	<clipPath id="clipPath1">
		<path class="layer" transform="translate(262,5)"/>
	</clipPath>
	<clipPath id="clipPath2">
		<path class="layer" transform="translate(262,26)"/>
	</clipPath>
    <filter id="filter" x="81" y="923" width="265" height="35" filterUnits="userSpaceOnUse">
      <feGaussianBlur result="blur" stdDeviation="3.333" in="SourceAlpha"/>
      <feComposite result="composite"/>
      <feComposite result="composite-2"/>
      <feComposite result="composite-3"/>
      <feFlood result="flood" flood-color="#6ff" flood-opacity="0.4"/>
      <feComposite result="composite-4" operator="in" in2="composite-3"/>
      <feBlend result="blend" in2="SourceGraphic"/>
      <feBlend result="blend-2" in="SourceGraphic"/>
    </filter>
    <filter id="filter-2" x="81" y="943" width="265" height="35" filterUnits="userSpaceOnUse">
      <feGaussianBlur result="blur" stdDeviation="3.333" in="SourceAlpha"/>
      <feComposite result="composite"/>
      <feComposite result="composite-2"/>
      <feComposite result="composite-3"/>
      <feFlood result="flood" flood-color="#ffcf6e" flood-opacity="0.4"/>
      <feComposite result="composite-4" operator="in" in2="composite-3"/>
      <feBlend result="blend" in2="SourceGraphic"/>
      <feBlend result="blend-2" in="SourceGraphic"/>
    </filter>
  </defs>
  <path id="矩形_921_拷贝_11" data-name="矩形 921 拷贝 11" class="cls-1" d="M330,948l-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0L90,932h6l10,16h-6Z" transform="translate(-81 -923)"/>
  
  <path id="矩形_921_拷贝_12" data-name="矩形 921 拷贝 12" class="cls-1" d="M326,968h-6l10-16h6Zm-16,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6L96,968H90Z" transform="translate(-81 -923)"/>
  
  <g class="paths" clip-path="url(#clipPath1)">
	<path id="矩形_921_拷贝_14" data-name="矩形 921 拷贝 14" class="cls-2" d="M330,948l-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0-10-16h6l10,16h-6Zm-10,0L90,932h6l10,16h-6Z" transform="translate(-81 -923)"/>
  </g>
  <g class="paths" clip-path="url(#clipPath2)">
	<path id="矩形_921_拷贝_13" data-name="矩形 921 拷贝 13" class="cls-3" d="M326,968h-6l10-16h6Zm-16,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6l-10,16h-6Zm-10,0,10-16h6L96,968H90Z" transform="translate(-81 -923)"/>
  </g>
</svg>

</div>

<div id="myForm" style="text-align:center">
    <input type="text" id="text" placeholder="请输入数组例如:[90,10]"/>
    <!--
    <div style="color: #fff">
        <input type="radio" name="flag" value="0" checked>顺
        <input type="radio" name="flag" value="1">逆
    </div>
    -->
    <!-- <div>
        <input type="range" name="points" min="0" max="100%" value="80%" id="range"/>
    </div> -->
    <button id="change">变</button>
</div>

<script src="../../js/d3.js"></script>
<script>
/*
    *  @param id  id值，如本例使用的#test
    *  @param value 变化的最终值
    */
    function draw(paramsObj) {
        var id = paramsObj.id;
        var progress = paramsObj.value;
        var svg = d3.select(id).select("svg");
		//var text = svg.select('#text-value');
		//线性比例尺
		var linear = d3.scaleLinear()
			.domain([0, 100])
			.range([0, 245]);
		//区域生成器
		var areaPath = d3.area()
			.y(function(d,i){return i*23})
			.x0(function(d,i){return 0})
			.x1(function(d,i){return 0-d});

        var clipPath = d3.select(id).selectAll('.layer');
        clipPath.data(progress)
			.transition()
            .duration(1000)
            .attrTween('d', function(d,i){return tween(d,i)});

        function tween(val,index) {
            var i = d3.interpolate(0,0+linear(val));
            return function (t) {
				return index?areaPath([i(t),i(t)+14]):areaPath([i(t)+14,i(t)]);
            };
        }
    }

    var btn = document.getElementById('change');
    draw({id: "#test", value: [90,10]});
    btn.addEventListener("click", function () {
        var input = document.getElementById('text').value;
        try{
          if(!JSON.parse(input)) throw "请输入正确格式数组！";
        }catch(error){
          alert("请输入正确格式数组！")
          return false
        }
        if(input.length != 2){
          alert("请输入数组长度为2的数组！")
          return false;
        }
        input = JSON.parse(input);
        draw({id: "#test", value: input});
    }, false);
    // range.addEventListener("change", function () {
    //     var input1 = document.getElementById('text');
    //     input1.value = range.value;
    //     draw({id: "#test", value: range.value});
    // })

</script>
</body>
</html>