<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>广西-抄核收1</title>
    <style>
    #test {
        width: 80%;
        height: 400px;
        margin: 0 auto;
        text-align:center;;
        /* background-color:black; */
    }

    .cls-1, .cls-4, .cls-5, .cls-6 {
        fill: #fff;
      }

      .cls-1, .cls-2, .cls-3 {
        fill-rule: evenodd;
      }

      .cls-1 {
        opacity: 0.15;
      }

      .cls-2 {
        opacity: 0.6;
      }

      .cls-2, .cls-3 {
        fill: url(#linear-gradient);
      }

      .cls-4 {
        font-size: 20px;
        font-weight: 700;
      }

      .cls-4, .cls-5 {
        opacity: 0.8;
        font-family: "Microsoft YaHei";
      }

      .cls-5 {
        font-size: 14px;
      }

      .cls-6 {
        font-size: 28px;
        filter: url(#filter);
        font-family: Impact;
      }
    </style>
</head>
<body>
<div id="test">
    <svg id="组_766_拷贝" data-name="组 766 拷贝" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="330" height="63" viewBox="0 0 330 63">
<defs>
    <clipPath id="clipPath">
		<path class="layer"/>
	</clipPath>
	
    <linearGradient id="linear-gradient" x1="3818" y1="358" x2="4118" y2="358" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#a02fef"/>
      <stop offset="0.2" stop-color="#6680ff"/>
      <stop offset="0.4" stop-color="#5fafff"/>
      <stop offset="0.6" stop-color="#65e5ff"/>
      <stop offset="1" stop-color="#6f9"/>
    </linearGradient>
    <filter id="filter" x="220" y="0" width="103" height="43" filterUnits="userSpaceOnUse">
      <feGaussianBlur result="blur" stdDeviation="3.333" in="SourceAlpha"/>
      <feComposite result="composite"/>
      <feComposite result="composite-2"/>
      <feComposite result="composite-3"/>
      <feFlood result="flood" flood-color="#fec" flood-opacity="0.2"/>
      <feComposite result="composite-4" operator="in" in2="composite-3"/>
      <feBlend result="blend" in2="SourceGraphic"/>
      <feBlend result="blend-2" in="SourceGraphic"/>
    </filter>
  </defs>
  <g id="组_765" data-name="组 765">
    <path id="矩形_1023_拷贝_16" data-name="矩形 1023 拷贝 16" class="cls-1" d="M3818,353h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Z" transform="translate(-3803 -315)"/>
  </g>
  <text id="手工抄表率" class="cls-4" x="15" y="28">手工抄表率</text>
  <text id="_目标_99_" data-name="(目标 99%)" class="cls-5" x="119.998" y="28">(目标 99%)</text>
  <text id="text-value" class="cls-6" x="310" y="32.001" text-anchor="end">95.35%</text>
  <g class="paths" clip-path="url(#clipPath)">
	<path id="矩形_1023_拷贝_24" data-name="矩形 1023 拷贝 24" class="cls-2" d="M3818,353h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Z" transform="translate(-3803 -315)"/>
    <path id="矩形_1023_拷贝_25" data-name="矩形 1023 拷贝 25" class="cls-3" d="M3818,353h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Zm7,0h4l2,10h-4Z" transform="translate(-3803 -315)"/>
  </g>
</svg>



</div>

<div id="myForm" style="text-align: center;">
    <input type="text" id="text" placeholder="请输入0-100的数"/>
    <!--
    <div style="color: #fff">
        <input type="radio" name="flag" value="0" checked>顺
        <input type="radio" name="flag" value="1">逆
    </div>
    -->
    <div>
        <input type="range" name="points" min="0" max="100%" value="80%" id="range"/>
    </div>
    <button id="change">变</button>
</div>

<script src="../../js/d3.js"></script>
<script>
/*
    *  @param id  id值，如本例使用的#test
    *  @param value 变化的最终值
    */
    function draw(paramsObj) {
        var id = paramsObj.id;
        var progress = paramsObj.value;
        var svg = d3.select(id).select("svg");
		var text = svg.select('#text-value');
		//线性比例尺
		var linear = d3.scaleLinear()
			.domain([0, 100])
			.range([0, 302]);
		//区域生成器
		var areaPath = d3.area()
			.y(function(d,i){return i*20})
			.x0(function(d,i){return 0})
			.x1(function(d,i){return 0+d});

        var clipPath = d3.select(id).select('.layer');
        clipPath.attr('transform', 'translate(' + (12) + ',' + (-5) + ')')
			.transition()
            .duration(1000)
			//.attr("d",area)
            .attrTween('d', tween);

        function tween() {
            var i = d3.interpolate(0,0+linear(progress));
            return function (t) {
				text.html(Math.round(t * 100 * progress) / 100 + "%");
                return areaPath([i(t),i(t)+4,i(t),i(t)+4]);
            };
        }
    }

    var btn = document.getElementById('change');
    draw({id: "#test", value: 90.685});
    btn.addEventListener("click", function () {
        var input = document.getElementById('text').value;
        range.value = input;
        draw({id: "#test", value: input});
    }, false);
    range.addEventListener("change", function () {
        var input1 = document.getElementById('text');
        input1.value = range.value;
        draw({id: "#test", value: range.value});
    })

</script>
</body>
</html>