<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>环状指标-接通率-广西1</title>
    <style>
    #test {
        width: 80%;
        height: 400px;
        margin: 0 auto;
        /* background-color:black; */
    }

          .cls-1, .cls-4, .cls-5 {
        fill: none;
      }

      .cls-1 {
        stroke: #fff;
        stroke-width: 2px;
        opacity: 0.4;
      }

      .cls-2, .cls-4 {
        fill-rule: evenodd;
      }

      .cls-2 {
        fill: url(#linear-gradient);
      }

      .cls-3, .cls-6 {
        fill: #6cf;
      }

      .cls-4, .cls-5 {
        stroke: #6cf;
        stroke-width: 1px;
      }

      .cls-6 {
        opacity: 0.05;
      }

      .cls-7 {
        fill: #6ff;
        opacity: 0.1;
      }

      .cls-10, .cls-8 {
        font-size: 20px;
      }

      .cls-8 {
        opacity: 0.8;
      }

      .cls-10, .cls-11, .cls-8, .cls-9 {
        fill: #fff;
      }

      .cls-11, .cls-8 {
        font-family: "Microsoft YaHei";
      }

      .cls-9 {
        font-size: 32px;
        filter: url(#filter);
      }

      .cls-10, .cls-9 {
        font-family: Impact;
      }

      .cls-11 {
        font-size: 16px;
        font-weight: 700;
      }
      #myForm{
        text-align: center;
      }
    </style>
</head>
<body>
<div id="test">
    <svg id="组_11" data-name="组 11" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="223.5" height="128" viewBox="0 0 223.5 128">
<defs>
	<clipPath id="clipPath">
		<path id="layer"/>
	</clipPath>
    <linearGradient id="linear-gradient" x1="3884.97" y1="583" x2="3821.03" y2="583" gradientUnits="userSpaceOnUse">
      <stop offset="0" stop-color="#6ef5e7"/>
      <stop offset="1" stop-color="#8967f7"/>
    </linearGradient>
    <filter id="filter" x="101" y="41" width="115" height="46" filterUnits="userSpaceOnUse">
      <feGaussianBlur result="blur" stdDeviation="3.333" in="SourceAlpha"/>
      <feComposite result="composite"/>
      <feComposite result="composite-2"/>
      <feComposite result="composite-3"/>
      <feFlood result="flood" flood-color="#fec" flood-opacity="0.2"/>
      <feComposite result="composite-4" operator="in" in2="composite-3"/>
      <feBlend result="blend" in2="SourceGraphic"/>
      <feBlend result="blend-2" in="SourceGraphic"/>
    </filter>
  </defs>
  <g id="组_11_拷贝" data-name="组 11 拷贝">
    <circle id="椭圆_1020_拷贝" data-name="椭圆 1020 拷贝" class="cls-1" cx="47" cy="81" r="29"/>
    <circle id="椭圆_1020" data-name="椭圆 1020" class="cls-3" cx="47" cy="81" r="8"/>
    <path id="形状_1162" data-name="形状 1162" class="cls-4" d="M3853,582l44-53h127" transform="translate(-3806 -502)"/>
    <rect id="矩形_1162" data-name="矩形 1162" class="cls-5" x="218" y="25" width="5" height="5"/>
    <rect id="矩形_6" data-name="矩形 6" class="cls-6" x="87" y="35" width="130" height="78"/>
    <rect id="矩形_6_拷贝_5" data-name="矩形 6 拷贝 5" class="cls-7" x="93" y="41" width="130" height="78"/>
  </g>
  <g id="组_766" data-name="组 766">
    <text id="当月" class="cls-8" x="178.998" y="17">当月</text>
    <text id="_95.95_" data-name="95.95%" class="cls-9 center-text" x="156" y="76.001" text-anchor="middle">95.95%</text>
    <text id="_325.25" data-name="325.25" class="cls-10" x="116.998" y="103">325.25</text>
    <text id="万" class="cls-11" x="175.999" y="101">万</text>
  </g>
  <g clip-path="url(#clipPath)">
	<path id="矩形_1894_拷贝_18" data-name="矩形 1894 拷贝 18" class="cls-2" d="M3876.77,586.175q0.135-1.074.18-2.175h8.02a30.01,30.01,0,0,1-.3,3.569Zm0.18-4.175q-0.045-1.1-.18-2.175l7.9-1.394a29.992,29.992,0,0,1,.3,3.569h-8.02Zm-0.52-4.147c-0.15-.717-0.34-1.424-0.55-2.115L3883.4,573a33.161,33.161,0,0,1,.93,3.46Zm-1.24-3.993c-0.28-.677-0.59-1.335-0.93-1.979l6.94-4.009a29.478,29.478,0,0,1,1.51,3.249Zm-1.94-3.706q-0.585-.924-1.26-1.786l6.15-5.156a31.351,31.351,0,0,1,2.06,2.931Zm-5.62-6.148c-0.57-.444-1.17-0.864-1.78-1.255l4.01-6.949a33.486,33.486,0,0,1,2.93,2.06Zm-3.51-2.264c-0.65-.338-1.3-0.651-1.98-0.93l2.74-7.525a32.391,32.391,0,0,1,3.25,1.511Zm-3.86-1.617c-0.69-.22-1.4-0.4-2.11-0.558l1.39-7.9a31.8,31.8,0,0,1,3.46.931Zm-4.08-.891c-0.72-.1-1.45-0.153-2.18-0.184v-8.025a32.215,32.215,0,0,1,3.57.305Zm-4.18-.184c-0.73.031-1.46,0.089-2.18,0.184l-1.39-7.9a32.215,32.215,0,0,1,3.57-.305v8.025Zm-4.15.517c-0.71.157-1.42,0.338-2.11,0.558L3843,552.6a31.8,31.8,0,0,1,3.46-.931Zm-3.99,1.245c-0.68.279-1.33,0.592-1.98,0.93l-4.01-6.944a32.391,32.391,0,0,1,3.25-1.511Zm-3.71,1.939c-0.61.391-1.21,0.811-1.78,1.255l-5.16-6.144a33.486,33.486,0,0,1,2.93-2.06Zm-6.14,5.617q-0.675.864-1.26,1.786l-6.95-4.011a31.351,31.351,0,0,1,2.06-2.931Zm-2.27,3.513c-0.34.644-.65,1.3-0.93,1.979l-7.52-2.739a29.478,29.478,0,0,1,1.51-3.249Zm-1.62,3.857c-0.21.691-.4,1.4-0.55,2.115l-7.9-1.393a33.161,33.161,0,0,1,.93-3.46Zm-0.89,4.087q-0.135,1.072-.18,2.175h-8.02a29.992,29.992,0,0,1,.3-3.569ZM3829.05,584q0.045,1.1.18,2.175l-7.9,1.394a30.01,30.01,0,0,1-.3-3.569h8.02Zm0.52,4.147c0.15,0.717.34,1.424,0.55,2.115L3822.6,593a33.161,33.161,0,0,1-.93-3.46Zm1.24,3.993c0.28,0.677.59,1.335,0.93,1.979l-6.94,4.009a29.478,29.478,0,0,1-1.51-3.249Zm1.94,3.706q0.585,0.924,1.26,1.786l-6.15,5.156a31.351,31.351,0,0,1-2.06-2.931Zm5.62,6.148c0.57,0.444,1.17.864,1.78,1.255l-4.01,6.949a33.486,33.486,0,0,1-2.93-2.06Zm3.51,2.264c0.65,0.338,1.3.651,1.98,0.93l-2.74,7.525a32.391,32.391,0,0,1-3.25-1.511Zm3.86,1.617c0.69,0.219,1.4.4,2.11,0.558l-1.39,7.9a32.033,32.033,0,0,1-3.46-.931Zm4.08,0.891c0.72,0.1,1.45.153,2.18,0.183v8.026a32.458,32.458,0,0,1-3.57-.305Zm4.18,0.183c0.73-.03,1.46-0.088,2.18-0.183l1.39,7.9a32.458,32.458,0,0,1-3.57.305v-8.026Zm4.15-.516c0.71-.157,1.42-0.339,2.11-0.558L3863,613.4a32.033,32.033,0,0,1-3.46.931Zm3.99-1.245c0.68-.279,1.33-0.592,1.98-0.93l4.01,6.944a32.391,32.391,0,0,1-3.25,1.511Zm3.71-1.939c0.61-.391,1.21-0.811,1.78-1.255l5.16,6.144a33.486,33.486,0,0,1-2.93,2.06Zm6.14-5.617q0.675-.864,1.26-1.786l6.95,4.011a31.351,31.351,0,0,1-2.06,2.931Zm2.27-3.513c0.34-.644.65-1.3,0.93-1.979l7.52,2.739a29.478,29.478,0,0,1-1.51,3.249ZM3883.4,593l-7.52-2.738c0.21-.691.4-1.4,0.55-2.115l7.9,1.393A33.161,33.161,0,0,1,3883.4,593Zm-12.69,6.162,6.14,5.16a31.169,31.169,0,0,1-2.53,2.533l-5.16-6.15C3869.7,600.214,3870.21,599.7,3870.71,599.162Zm-35.42,0c0.5,0.538,1.01,1.052,1.55,1.543l-5.16,6.15a32.99,32.99,0,0,1-2.54-2.533Zm0-32.324-6.15-5.16a32.99,32.99,0,0,1,2.54-2.533l5.16,6.15C3836.3,565.786,3835.79,566.3,3835.29,566.838Zm35.42,0c-0.5-.538-1.01-1.052-1.55-1.543l5.16-6.15a31.169,31.169,0,0,1,2.53,2.533Z" transform="translate(-3806 -502)"/>
    <path id="矩形_1894_拷贝_17" data-name="矩形 1894 拷贝 17" class="cls-2" d="M3876.77,586.175q0.135-1.074.18-2.175h8.02a30.01,30.01,0,0,1-.3,3.569Zm0.18-4.175q-0.045-1.1-.18-2.175l7.9-1.394a29.992,29.992,0,0,1,.3,3.569h-8.02Zm-0.52-4.147c-0.15-.717-0.34-1.424-0.55-2.115L3883.4,573a33.161,33.161,0,0,1,.93,3.46Zm-1.24-3.993c-0.28-.677-0.59-1.335-0.93-1.979l6.94-4.009a29.478,29.478,0,0,1,1.51,3.249Zm-1.94-3.706q-0.585-.924-1.26-1.786l6.15-5.156a31.351,31.351,0,0,1,2.06,2.931Zm-5.62-6.148c-0.57-.444-1.17-0.864-1.78-1.255l4.01-6.949a33.486,33.486,0,0,1,2.93,2.06Zm-3.51-2.264c-0.65-.338-1.3-0.651-1.98-0.93l2.74-7.525a32.391,32.391,0,0,1,3.25,1.511Zm-3.86-1.617c-0.69-.22-1.4-0.4-2.11-0.558l1.39-7.9a31.8,31.8,0,0,1,3.46.931Zm-4.08-.891c-0.72-.1-1.45-0.153-2.18-0.184v-8.025a32.215,32.215,0,0,1,3.57.305Zm-4.18-.184c-0.73.031-1.46,0.089-2.18,0.184l-1.39-7.9a32.215,32.215,0,0,1,3.57-.305v8.025Zm-4.15.517c-0.71.157-1.42,0.338-2.11,0.558L3843,552.6a31.8,31.8,0,0,1,3.46-.931Zm-3.99,1.245c-0.68.279-1.33,0.592-1.98,0.93l-4.01-6.944a32.391,32.391,0,0,1,3.25-1.511Zm-3.71,1.939c-0.61.391-1.21,0.811-1.78,1.255l-5.16-6.144a33.486,33.486,0,0,1,2.93-2.06Zm-6.14,5.617q-0.675.864-1.26,1.786l-6.95-4.011a31.351,31.351,0,0,1,2.06-2.931Zm-2.27,3.513c-0.34.644-.65,1.3-0.93,1.979l-7.52-2.739a29.478,29.478,0,0,1,1.51-3.249Zm-1.62,3.857c-0.21.691-.4,1.4-0.55,2.115l-7.9-1.393a33.161,33.161,0,0,1,.93-3.46Zm-0.89,4.087q-0.135,1.072-.18,2.175h-8.02a29.992,29.992,0,0,1,.3-3.569ZM3829.05,584q0.045,1.1.18,2.175l-7.9,1.394a30.01,30.01,0,0,1-.3-3.569h8.02Zm0.52,4.147c0.15,0.717.34,1.424,0.55,2.115L3822.6,593a33.161,33.161,0,0,1-.93-3.46Zm1.24,3.993c0.28,0.677.59,1.335,0.93,1.979l-6.94,4.009a29.478,29.478,0,0,1-1.51-3.249Zm1.94,3.706q0.585,0.924,1.26,1.786l-6.15,5.156a31.351,31.351,0,0,1-2.06-2.931Zm5.62,6.148c0.57,0.444,1.17.864,1.78,1.255l-4.01,6.949a33.486,33.486,0,0,1-2.93-2.06Zm3.51,2.264c0.65,0.338,1.3.651,1.98,0.93l-2.74,7.525a32.391,32.391,0,0,1-3.25-1.511Zm3.86,1.617c0.69,0.219,1.4.4,2.11,0.558l-1.39,7.9a32.033,32.033,0,0,1-3.46-.931Zm4.08,0.891c0.72,0.1,1.45.153,2.18,0.183v8.026a32.458,32.458,0,0,1-3.57-.305Zm4.18,0.183c0.73-.03,1.46-0.088,2.18-0.183l1.39,7.9a32.458,32.458,0,0,1-3.57.305v-8.026Zm4.15-.516c0.71-.157,1.42-0.339,2.11-0.558L3863,613.4a32.033,32.033,0,0,1-3.46.931Zm3.99-1.245c0.68-.279,1.33-0.592,1.98-0.93l4.01,6.944a32.391,32.391,0,0,1-3.25,1.511Zm3.71-1.939c0.61-.391,1.21-0.811,1.78-1.255l5.16,6.144a33.486,33.486,0,0,1-2.93,2.06Zm6.14-5.617q0.675-.864,1.26-1.786l6.95,4.011a31.351,31.351,0,0,1-2.06,2.931Zm2.27-3.513c0.34-.644.65-1.3,0.93-1.979l7.52,2.739a29.478,29.478,0,0,1-1.51,3.249ZM3883.4,593l-7.52-2.738c0.21-.691.4-1.4,0.55-2.115l7.9,1.393A33.161,33.161,0,0,1,3883.4,593Zm-12.69,6.162,6.14,5.16a31.169,31.169,0,0,1-2.53,2.533l-5.16-6.15C3869.7,600.214,3870.21,599.7,3870.71,599.162Zm-35.42,0c0.5,0.538,1.01,1.052,1.55,1.543l-5.16,6.15a32.99,32.99,0,0,1-2.54-2.533Zm0-32.324-6.15-5.16a32.99,32.99,0,0,1,2.54-2.533l5.16,6.15C3836.3,565.786,3835.79,566.3,3835.29,566.838Zm35.42,0c-0.5-.538-1.01-1.052-1.55-1.543l5.16-6.15a31.169,31.169,0,0,1,2.53,2.533Z" transform="translate(-3806 -502)"/>
  </g>
</svg>

</div>

<div id="myForm">
    <input type="text" id="text" placeholder="请输入0-100的数"/>
    <!--
    <div style="color: #fff">
        <input type="radio" name="flag" value="0" checked>顺
        <input type="radio" name="flag" value="1">逆
    </div>
    -->
    <div>
        <input type="range" name="points" min="0" max="100%" value="80%" id="range"/>
    </div>
    <button id="change">变</button>
</div>

<script src="../../js/d3.js"></script>
<script>
/*
    *  @param id  id值，如本例使用的#test
    *  @param value 变化的最终值
    */
    function draw(paramsObj) {
        var id = paramsObj.id;
        var progress = paramsObj.value;
        var svg = d3.select(id).select("svg");
        var text = d3.select('.center-text');
        var arcs = d3.arc()
            .outerRadius(180)
            .innerRadius(0);

        var clipPath = d3.select(id).select('#layer');
        clipPath.attr('transform', 'translate(' + 46 + ',' + 79 + ')')
            .transition()
            .duration(3000)
            .attrTween('d', tween);

        function tween() {
            var i = d3.interpolate(
                {startAngle: deg2Radians(45), endAngle: deg2Radians(45)},
                {startAngle: deg2Radians(45), endAngle: deg2Radians(45)+valueToRadians(progress)},
            );
            return function (t) {
                //console.log(t);
                text.html(Math.round(t * 100 * progress) / 100 + "%");
                return arcs(i(t));
            };
        }

        function valueToDegrees(value) {
            return value / 100 * 360
        }


        function valueToRadians(value) {
            return valueToDegrees(value) * Math.PI / 180;
        }

        function deg2Radians(deg){
            return deg* Math.PI/180;
        }
    }

    var btn = document.getElementById('change');
    draw({id: "#test", value: 93.55});
    btn.addEventListener("click", function () {
        var input = document.getElementById('text').value;
        range.value = input;
        draw({id: "#test", value: input});
    }, false);
    range.addEventListener("change", function () {
        var input1 = document.getElementById('text');
        input1.value = range.value;
        draw({id: "#test", value: range.value});
    })

</script>
</body>
</html>